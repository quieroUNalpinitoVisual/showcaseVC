<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Procedural Texturing # En esta sección aplicamos el ejemplo visto en clase desde el cual se generaba una textura proceduralmente aplicando el patrón truchet tiles, pero en este caso, sobre un objeto distinto.
Desarrollo del Ejercicio # El objetivo de la texturización procesal es generar una textura mediante un algoritmo de tal manera que el resultado se pueda asignar a una forma como textura. La textura de procedimiento requiere el uso de un objeto de búfer de cuadro que en p5."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Procedural Texturing # En esta sección aplicamos el ejemplo visto en clase desde el cual se generaba una textura proceduralmente aplicando el patrón truchet tiles, pero en este caso, sobre un objeto distinto.
Desarrollo del Ejercicio # El objetivo de la texturización procesal es generar una textura mediante un algoritmo de tal manera que el resultado se pueda asignar a una forma como textura. La textura de procedimiento requiere el uso de un objeto de búfer de cuadro que en p5."><meta property="og:type" content="article"><meta property="og:url" content="https://quieroUNalpinitoVisualvisual.github.io/showcasevc/docs/shortcodes/shaders/Procedural/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-06-27T23:42:38-05:00"><title>Procedural | quieroUNalpinitoVisual</title><link rel=manifest href=/showcasevc/manifest.json><link rel=icon href=/showcasevc/favicon.png type=image/x-icon><link rel=stylesheet href=/showcasevc/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/showcasevc/flexsearch.min.js></script>
<script defer src=/showcasevc/en.search.min.809d9a28ea011aace79ea52705a20547d19f3ff9ca2b3c6cfbfb78367f369d6a.js integrity="sha256-gJ2aKOoBGqznnqUnBaIFR9GfP/nKKzxs+/t4Nn82nWo=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcasevc/><span>quieroUNalpinitoVisual</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><input type=checkbox id=section-15b587266f7e9455acb5cc0e2d3ba030 class=toggle>
<label for=section-15b587266f7e9455acb5cc0e2d3ba030 class="flex justify-between"><a href=/showcasevc/docs/shortcodes/Antialiasing/>Antialiasing</a></label><ul><li><a href=/showcasevc/docs/shortcodes/Antialiasing/AntialiasingLab/>Antialiasing Lab</a></li><li><a href=/showcasevc/docs/shortcodes/Antialiasing/AntialiasingRes/>Antialiasing Res</a></li></ul></li><li><input type=checkbox id=section-2122fdcffebe01fd456e0888c104224e class=toggle>
<label for=section-2122fdcffebe01fd456e0888c104224e class="flex justify-between"><a href=/showcasevc/docs/shortcodes/Interactions-3D/>Interactions 3 D</a></label><ul></ul></li><li><input type=checkbox id=section-9765ec9f2fa63ff0746715996222150b class=toggle>
<label for=section-9765ec9f2fa63ff0746715996222150b class="flex justify-between"><a href=/showcasevc/docs/shortcodes/masking/>Masking</a></label><ul><li><a href=/showcasevc/docs/shortcodes/masking/maskingLab/>Masking Lab</a></li><li><a href=/showcasevc/docs/shortcodes/masking/maskingRes/>Masking Res</a></li></ul></li><li><a href=/showcasevc/docs/shortcodes/members/>Members</a></li><li><input type=checkbox id=section-6d6445ed16f829ce6720abb33c55105e class=toggle checked>
<label for=section-6d6445ed16f829ce6720abb33c55105e class="flex justify-between"><a href=/showcasevc/docs/shortcodes/shaders/>Shaders</a></label><ul><li><a href=/showcasevc/docs/shortcodes/shaders/EdgeAntiAliasing/>Edge Anti Aliasing</a></li><li><a href=/showcasevc/docs/shortcodes/shaders/imageProcessing/>Image Processing</a></li><li><a href=/showcasevc/docs/shortcodes/shaders/Procedural/ class=active>Procedural</a></li><li><a href=/showcasevc/docs/shortcodes/shaders/texturing/>Texturing</a></li></ul></li><li><input type=checkbox id=section-d95dc5d36ab28c1f4c64829f0b016347 class=toggle>
<label for=section-d95dc5d36ab28c1f4c64829f0b016347 class="flex justify-between"><a href=/showcasevc/docs/shortcodes/terrain/>Terrain</a></label><ul><li><a href=/showcasevc/docs/shortcodes/terrain/terrain1/>Terrain1</a></li><li><a href=/showcasevc/docs/shortcodes/terrain/terrain2/>Terrain2</a></li><li><a href=/showcasevc/docs/shortcodes/terrain/terrain3/>Terrain3</a></li><li><a href=/showcasevc/docs/shortcodes/terrain/terrainRes/>Terrain Res</a></li></ul></li><li><input type=checkbox id=section-7346d9061846b999f0e822a45cd24357 class=toggle>
<label for=section-7346d9061846b999f0e822a45cd24357 class="flex justify-between"><a href=/showcasevc/docs/shortcodes/Transformations/>Transformations</a></label><ul><li><a href=/showcasevc/docs/shortcodes/Transformations/rubikcube/>Rubikcube</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcasevc/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Procedural</strong>
<label for=toc-control><img src=/showcasevc/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#procedural-texturing>Procedural Texturing</a><ul><li><ul><li><a href=#desarrollo-del-ejercicio><strong>Desarrollo del Ejercicio</strong></a></li></ul></li><li><a href=#truchet-tiles>Truchet Tiles:</a><ul><li><a href=#implementación><strong>Implementación</strong></a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=procedural-texturing>Procedural Texturing
<a class=anchor href=#procedural-texturing>#</a></h1><p>En esta sección aplicamos el ejemplo visto en clase desde el cual se generaba una textura proceduralmente aplicando el patrón <em>truchet tiles</em>, pero en este caso, sobre un objeto distinto.</p><h3 id=desarrollo-del-ejercicio><strong>Desarrollo del Ejercicio</strong>
<a class=anchor href=#desarrollo-del-ejercicio>#</a></h3><p>El objetivo de la texturización procesal es generar una textura mediante un algoritmo de tal manera que el resultado se pueda asignar a una forma como textura. La textura de procedimiento requiere el uso de un objeto de búfer de cuadro que en p5.js se implementa como un objeto p5.Graphics.</p><h2 id=truchet-tiles>Truchet Tiles:
<a class=anchor href=#truchet-tiles>#</a></h2><p>En el caso de mosaicos Truchet, donde un solo elemento de diseño se puede presentar de cuatro maneras diferentes:</p><img src=../../../../images/shaders/truchet-00.png><p>Al cambiar el patrón entre mosaicos, es posible construir un conjunto infinito de diseños complejos.</p><iframe id=sketch style=width:440px;height:440px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/objetos/p5.quadrille.js/p5.quadrille.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            <script src=/showcasevc/p5files/nicholsonSketch/procedural/sketch.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>sketch.js</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><p>let pg;
let truchetShader;
let frames=0;
let frames2=0.5;</p><p>function preload() {
// shader adapted from here: <a href=https://thebookofshaders.com/09/>https://thebookofshaders.com/09/</a>
truchetShader = readShader(&rsquo;/showcasevc/p5files/nicholsonSketch/procedural/truchet.frag&rsquo;, { matrices: Tree.NONE, varyings: Tree.NONE });
}</p><p>function setup() {
createCanvas(400, 400, WEBGL);
// create frame buffer object to render the procedural texture
pg = createGraphics(400, 400, WEBGL);
textureMode(NORMAL);
noStroke();
pg.noStroke();
pg.textureMode(NORMAL);
// use truchetShader to render onto pg
pg.shader(truchetShader);
// emitResolution, see:
// <a href=https://github.com/VisualComputing/p5.treegl#macros>https://github.com/VisualComputing/p5.treegl#macros</a>
pg.emitResolution(truchetShader);
// <a href=https://p5js.org/reference/#/p5.Shader/setUniform>https://p5js.org/reference/#/p5.Shader/setUniform</a>
truchetShader.setUniform(&lsquo;u_zoom&rsquo;, 3);
// pg clip-space quad (i.e., both x and y vertex coordinates ∈ [-1..1])
pg.quad(-1, -1, 1, -1, 1, 1, -1, 1);
// set pg as texture
texture(pg);
}</p><p>function draw() {
background(33);</p><p>orbitControl();
rotateZ(frames * 0.005);
rotateX(frames * 0.005);
rotateY(frames * 0.005);</p><p>truchetShader.setUniform(&lsquo;u_zoom&rsquo;, int(map(frames2, 0, width, 1, 30)));
pg.quad(-1, -1, 1, -1, 1, 1, -1, 1);
frames++;
frames2 = frames2 + 0.5;</p><p>sphere(150,200);
}</p><p>function mouseMoved() {
// <a href=https://p5js.org/reference/#/p5.Shader/setUniform>https://p5js.org/reference/#/p5.Shader/setUniform</a>
truchetShader.setUniform(&lsquo;u_zoom&rsquo;, int(map(mouseX, 0, width, 1, 30)));
// pg clip-space quad (i.e., both x and y vertex coordinates ∈ [-1..1])
pg.quad(-1, -1, 1, -1, 1, 1, -1, 1);
}</p></div></label></div><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>truchet.frag</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><p>// Author @patriciogv ( patriciogonzalezvivo.com ) - 2015</p><p>#ifdef GL_ES
precision mediump float;
#endif</p><p>#define PI 3.14159265358979323846</p><p>uniform vec2 u_resolution;
uniform float u_time;
uniform float u_zoom;</p><p>vec2 rotate2D (vec2 _st, float _angle) {
_st -= 0.5;
_st = mat2(cos(_angle),-sin(_angle),
sin(_angle),cos(_angle)) * _st;
_st += 0.5;
return _st;
}</p><p>vec2 tile (vec2 _st, float _zoom) {
_st *= u_zoom;
return fract(_st);
}</p><p>vec2 rotateTilePattern(vec2 _st){</p><pre><code>//  Scale the coordinate system by 2x2
_st *= 2.0;

//  Give each cell an index number
//  according to its position
float index = 0.0;
index += step(1., mod(_st.x,2.0));
index += step(1., mod(_st.y,2.0))*2.0;

//      |
//  2   |   3
//      |
//--------------
//      |
//  0   |   1
//      |

// Make each cell between 0.0 - 1.0
_st = fract(_st);

// Rotate each cell according to the index
if(index == 1.0){
    //  Rotate cell 1 by 90 degrees
    _st = rotate2D(_st,PI*0.5);
} else if(index == 2.0){
    //  Rotate cell 2 by -90 degrees
    _st = rotate2D(_st,PI*-0.5);
} else if(index == 3.0){
    //  Rotate cell 3 by 180 degrees
    _st = rotate2D(_st,PI);
}

return _st;
</code></pre><p>}</p><p>void main (void) {
vec2 st = gl_FragCoord.xy/u_resolution.xy;</p><pre><code>st = tile(st,3.0);
st = rotateTilePattern(st);

// Make more interesting combinations
st = tile(st,2.0);

st = rotate2D(st,-PI*u_time*0.25);
//st = rotateTilePattern(st*2.);
st = tile(st,2.0);
st = rotate2D(st,PI*u_time*0.25);
//st = rotateTilePattern(st*2.);
st = tile(st,2.0);

// step(st.x,st.y) just makes a b&amp;w triangles
// but you can use whatever design you want.
gl_FragColor = vec4(vec3(step(st.x,st.y)),1.0);
</code></pre><p>}</p></div></label></div><h3 id=implementación><strong>Implementación</strong>
<a class=anchor href=#implementaci%c3%b3n>#</a></h3><h4 id=sketchjs>sketch.js
<a class=anchor href=#sketchjs>#</a></h4><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><pre><code>    let pg;
    let truchetShader;
    let frames=0;
    let frames2=100;

    function preload() {
      // shader adapted from here: https://thebookofshaders.com/09/
      truchetShader = readShader('/showcasevc/p5files/nicholsonSketch/procedural/truchet.frag', { matrices: Tree.NONE, varyings: Tree.NONE });
    }

    function setup() {
      createCanvas(400, 400, WEBGL);
      // create frame buffer object to render the procedural texture
      pg = createGraphics(400, 400, WEBGL);
      textureMode(NORMAL);
      noStroke();
      pg.noStroke();
      pg.textureMode(NORMAL);
      // use truchetShader to render onto pg
      pg.shader(truchetShader);
      // emitResolution, see:
      // https://github.com/VisualComputing/p5.treegl#macros
      pg.emitResolution(truchetShader);
      // https://p5js.org/reference/#/p5.Shader/setUniform
      truchetShader.setUniform('u_zoom', 3);
      // pg clip-space quad (i.e., both x and y vertex coordinates ∈ [-1..1])
      pg.quad(-1, -1, 1, -1, 1, 1, -1, 1);
      // set pg as texture
      texture(pg);
    }

    function draw() {
      background(33);
      
      orbitControl();
      rotateZ(frames * 0.005);
      rotateX(frames * 0.005);
      rotateY(frames * 0.005);

      truchetShader.setUniform('u_zoom', int(map(frames2*0.1, 0, width, 1, 30)));
      pg.quad(-1, -1, 1, -1, 1, 1, -1, 1);
      frames++;
      frames2 = frames2 + 2;
      
      sphere(100,200);
    }

    function mouseMoved() {
      // https://p5js.org/reference/#/p5.Shader/setUniform
      truchetShader.setUniform('u_zoom', int(map(mouseX, 0, width, 1, 30)));
      // pg clip-space quad (i.e., both x and y vertex coordinates ∈ [-1..1])
      pg.quad(-1, -1, 1, -1, 1, 1, -1, 1);
    }
</code></pre></div></label></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/quieroUNalpinitoVisualVisual/showcasevc//commit/4a078df496776411330305dcb7d047734eb40bb2 title='Last modified by nsochoaga | June 28, 2022' target=_blank rel=noopener><img src=/showcasevc/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 28, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#procedural-texturing>Procedural Texturing</a><ul><li><ul><li><a href=#desarrollo-del-ejercicio><strong>Desarrollo del Ejercicio</strong></a></li></ul></li><li><a href=#truchet-tiles>Truchet Tiles:</a><ul><li><a href=#implementación><strong>Implementación</strong></a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>